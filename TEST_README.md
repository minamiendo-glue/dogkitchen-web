# 絞り込み機能テストガイド

## 概要
レシピの絞り込み機能をテストするためのテストデータと手順を提供します。

## テストデータの特徴
- **総数**: 36件のレシピ
- **様々な条件の組み合わせ**: ライフステージ、健康状態、タンパク質タイプ、食事シーン、難易度、調理時間

## テストデータの内訳

### ライフステージ別
- **子犬期**: 2件
- **成犬期**: 多数
- **シニア期**: 3件

### 健康状態別
- **バランスGood**: 多数
- **腎臓ケア**: 2件
- **心臓ケア**: 2件
- **肝臓ケア**: 1件
- **皮膚ケア**: 1件
- **お腹が弱い**: 1件
- **熱中症対策**: 2件
- **体重増加**: 1件
- **冷え**: 1件
- **嗜好性UP**: 2件
- **関節ケア**: 3件

### タンパク質タイプ別
- **牛**: 4件
- **豚**: 2件
- **鶏**: 8件
- **馬**: 4件
- **魚**: 8件
- **カンガルー**: 2件

### 食事シーン別
- **日常ごはん**: 多数
- **おやつ**: 4件
- **特別な日**: 4件

### 難易度別
- **簡単**: 多数
- **普通**: 多数
- **難しい**: 4件

### 調理時間別
- **5分**: 1件
- **10分**: 3件
- **15分**: 3件
- **20分**: 5件
- **25分**: 3件
- **30分**: 4件
- **45分**: 2件
- **60分**: 1件
- **90分**: 1件
- **120分**: 1件

## テスト手順

### 1. テストデータの作成
1. 管理画面のテストページにアクセス: `http://localhost:3000/admin/test`
2. 「テストデータを作成」ボタンをクリック
3. 成功メッセージが表示されることを確認

### 2. ホーム画面での絞り込みテスト
1. ホーム画面にアクセス: `http://localhost:3000`
2. レシピ一覧の絞り込み機能をテスト
3. 以下の条件で絞り込みをテスト:
   - ライフステージ: 子犬期、成犬期、シニア期
   - 健康状態: 各健康状態を個別に選択
   - タンパク質: 牛、豚、鶏、馬、魚、カンガルー
   - 食事シーン: 日常ごはん、おやつ、特別な日
   - 難易度: 簡単、普通、難しい
   - 調理時間: 15分以下、30分以下、1時間以下、1時間以上

### 3. 管理画面での絞り込みテスト
1. 特集作成画面にアクセス: `http://localhost:3000/admin/blog/features/create`
2. 「レシピの検索・選択」セクションで絞り込み機能をテスト
3. 以下の機能をテスト:
   - テキスト検索
   - ライフステージ絞り込み
   - 健康状態絞り込み
   - タンパク質タイプ絞り込み
   - 食事シーン絞り込み
   - 難易度絞り込み
   - 調理時間範囲指定
   - カロリー範囲指定
   - 並び替え機能
   - レシピ選択機能

### 4. 複合条件のテスト
以下の複合条件で絞り込みをテスト:
- 子犬期 + 腎臓ケア
- シニア期 + 心臓ケア
- ダイエット + おやつ
- 特別な日 + 関節ケア
- 熱中症対策 + 簡単

### 5. テストデータの削除
1. テスト完了後、管理画面のテストページに戻る
2. 「テストデータを削除」ボタンをクリック
3. テストデータが削除されることを確認

## 期待される動作

### 正常な動作
- 各フィルター条件で適切な件数が表示される
- 複数条件の組み合わせで正しく絞り込まれる
- テキスト検索でタイトルや説明文が検索される
- 並び替えが正しく動作する
- レシピ選択が正常に動作する

### エラーパターン
- フィルター条件が正しく適用されない
- 検索結果が0件になる（条件が厳しすぎる場合を除く）
- 並び替えが機能しない
- レシピ選択ができない

## トラブルシューティング

### テストデータが作成されない場合
1. データベース接続を確認
2. Supabaseの設定を確認
3. 既存のテストデータを削除してから再作成

### 絞り込みが動作しない場合
1. ブラウザのキャッシュをクリア
2. 開発サーバーを再起動
3. コンソールエラーを確認

### レシピが表示されない場合
1. テストデータが正しく作成されているか確認
2. APIエンドポイントが正常に動作しているか確認
3. データベースのレシピテーブルを直接確認

## 注意事項
- テストデータは本番環境では使用しないでください
- テスト完了後は必ずテストデータを削除してください
- テストデータは既存のレシピデータと混在する可能性があります
